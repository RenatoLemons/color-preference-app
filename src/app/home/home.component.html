<div class="home">
    <div class="add-container">
        <button type="button" mat-raised-button color="primary" class="add" (click)="addPreference()">
            Add User Preference
        </button>
    </div>
    <div class="chart-container">
        <app-users-preferences-chart-bar />
    </div>
    <div class="top-preferences-container">
        <mat-card-title fxLayout.gt-xs="row" fxLayout.xs="column">
            <h2>Users Preferences</h2>
        </mat-card-title>
        <mat-card-content>
            <table mat-table [dataSource]="updating ? [] : dataSource" class="mat-elevation-z8"
                aria-describedby="user preferences list" matSort matSortActive="firstName" matSortDirection="asc">
                <ng-container matColumnDef="firstName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                    <td mat-cell *matCellDef="let userPreference"> {{userPreference.firstName}}
                        {{userPreference.lastName}} </td>
                </ng-container>

                <ng-container matColumnDef="age">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Age</th>
                    <td mat-cell *matCellDef="let userPreference"> {{userPreference.age}} </td>
                </ng-container>

                <ng-container matColumnDef="color">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Color Preference</th>
                    <td mat-cell *matCellDef="let userPreference">
                        <app-drop-icon [colorName]="userPreference.colorName" />
                        {{userPreference.colorName}}
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <div *ngIf="updating"
                style="display: flex; justify-content: center; align-items: center; background: white;">
                <mat-progress-spinner color="primary" mode="indeterminate">
                </mat-progress-spinner>
            </div>
            <div *ngIf="!updating && !dataSource.data.length">
                <p>There are no records yet, click on "Add User Preference" button to add the first one.</p>
            </div>
        </mat-card-content>
    </div>
</div>